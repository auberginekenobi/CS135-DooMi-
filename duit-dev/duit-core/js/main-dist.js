"use strict";!function(){function e(e,t,n){return e in n&&""!==n[e]&&(t+="&"+e+"="+n[e]),t}function t(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};arguments[2];firebase.auth().currentUser.getToken(!0).then(function(i){console.log(t),console.log(n);for(var o=["du_id","du_name","du_has_date","du_has_deadline","du_has_duration","du_time_start","du_time_end","du_priority","du_enforce_priority","du_note","du_status"],d="idToken="+i+"&uid="+firebase.auth().currentUser.uid+"&function_name="+t,a=0;a<o.length;a++){d=e(o[a],d,n)}console.log(d),$.ajax({cache:!1,type:"GET",url:"auth.php",data:d,success:function(e){$(".responseContainer").html(e)},error:function(e){console.log(e)}})})["catch"](function(e){console.log(e)})}var n={apiKey:"AIzaSyCdqoYOd1r8QE1-UGMOxCEIr7nJQymCXN8",authDomain:"duit-ba651.firebaseapp.com",databaseURL:"https://duit-ba651.firebaseio.com",projectId:"duit-ba651",storageBucket:"duit-ba651.appspot.com",messagingSenderId:"948811797559"};firebase.initializeApp(n);var i=document.getElementById("txtEmail"),o=document.getElementById("txtPassword"),d=document.getElementById("btnDisplay"),a=document.getElementById("btnAdd"),s=document.getElementById("btnLogin"),u=document.getElementById("btnSignUp"),r=document.getElementById("btnLogout");s&&s.addEventListener("click",function(){var e=i.value,t=o.value;firebase.auth().signInWithEmailAndPassword(e,t)["catch"](function(e){return console.log(e.message)})}),d&&d.addEventListener("click",function(){t("displayAsTable")}),$(".deleteDu")&&$(document).on("click",".deleteDu",function(e){t("deleteDu",{du_id:$(e.currentTarget).attr("class").slice(12)})}),a&&a.addEventListener("click",function(){var e=$("#du_name").val(),n=$("#du_time_start").val(),i=$("#du_time_end").val(),o=$("#du_time_deadline").val(),d=$("#du_note").val(),a=$("#du_status").val(),s=$("#du_priority").val(),u={du_name:e,du_time_start:n,du_time_end:i,du_note:d,du_status:a};""!=o&&(u.du_has_duration=1),"none"!=s&&(u.du_enforce_priority=1,u.du_priority=s),""!=o&&(u.du_has_deadline=1,u.du_time_start=o),console.log(u),t("add",u)}),u&&u.addEventListener("click",function(){var e=i.value,t=o.value,n=firebase.auth();n.createUserWithEmailAndPassword(e,t).then(function(){firebase.database().ref("users/"+n.currentUser.uid).set({uid:n.currentUser.uid})},function(e){console.log(e)})}),r&&r.addEventListener("click",function(){firebase.auth().signOut()}),firebase.auth().onAuthStateChanged(function(e){e?(console.log(e),r&&r.classList.remove("hide")):(console.log("not logged in"),r&&r.classList.add("hide"))})}(),$(document).ready(function(){function e(){var e=-$("#settings").outerWidth()-100;$("#settings").css("left",e)}e();var t=!1,n=$("#settings").position().left;$(document).on("click","body",function(e){setTimeout(function(){t&&!$(e.target).is("#settings, #settings *")&&(t=!1,$("#settings").animate({left:n},"1s")),$(e.target).is("#settings-btn, #settings-btn *")&&(t=!0,$("#settings").animate({left:0},"1s"))},10)})});