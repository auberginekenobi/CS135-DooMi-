"use strict";!function(){function e(e,t,n){return e in n&&""!==n[e]&&(t+="&"+e+"="+n[e]),t}function t(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};arguments[2];firebase.auth().currentUser.getToken(!0).then(function(i){console.log(t),console.log(n);for(var o=["du_id","du_name","du_has_date","du_has_deadline","du_has_duration","du_time_start","du_time_end","du_priority","du_enforce_priority","du_note","du_status"],a="idToken="+i+"&uid="+firebase.auth().currentUser.uid+"&function_name="+t,d=0;d<o.length;d++){a=e(o[d],a,n)}console.log(a),$.ajax({cache:!1,type:"GET",url:"auth.php",data:a,success:function(e){$(".responseContainer").html(e)},error:function(e){console.log(e)}})})["catch"](function(e){console.log(e)})}var n={apiKey:"AIzaSyCdqoYOd1r8QE1-UGMOxCEIr7nJQymCXN8",authDomain:"duit-ba651.firebaseapp.com",databaseURL:"https://duit-ba651.firebaseio.com",projectId:"duit-ba651",storageBucket:"duit-ba651.appspot.com",messagingSenderId:"948811797559"};firebase.initializeApp(n);var i=document.getElementById("txtEmail"),o=document.getElementById("txtPassword"),a=document.getElementById("btnDisplay"),d=document.getElementById("btnAdd"),u=document.getElementById("btnLogin"),s=document.getElementById("btnSignUp"),c=document.getElementById("btnLogout");u&&u.addEventListener("click",function(){var e=i.value,t=o.value;firebase.auth().signInWithEmailAndPassword(e,t)["catch"](function(e){return console.log(e.message)})}),a&&a.addEventListener("click",function(){t("displayAsTable")}),$(".deleteDu")&&$(document).on("click",".deleteDu",function(e){t("deleteDu",{du_id:$(e.currentTarget).attr("class").slice(12)})}),d&&d.addEventListener("click",function(){var e=$("#du_name").val(),n=$("#du_time_start").val(),i=$("#du_time_end").val(),o=$("#du_time_deadline").val(),a=$("#du_note").val(),d=$("#du_status").val(),u=$("#du_priority").val(),s={du_name:e,du_time_start:n,du_time_end:i,du_note:a,du_status:d};""!=o&&(s.du_has_duration=1),"none"!=u&&(s.du_enforce_priority=1,s.du_priority=u),""!=o&&(s.du_has_deadline=1,s.du_time_start=o),console.log(s),t("add",s)}),s&&s.addEventListener("click",function(){var e=i.value,t=o.value,n=firebase.auth();n.createUserWithEmailAndPassword(e,t).then(function(){firebase.database().ref("users/"+n.currentUser.uid).set({uid:n.currentUser.uid})},function(e){console.log(e)})}),c&&c.addEventListener("click",function(){firebase.auth().signOut()}),firebase.auth().onAuthStateChanged(function(e){e?(console.log(e),c&&c.classList.remove("hide")):(console.log("not logged in"),c&&c.classList.add("hide"))})}(),$(document).ready(function(){function e(){a=-$("#settings").outerWidth()-150,$("#settings").css("left",a)}function t(e,t){var n=e?u-1:-u,i=e?1:0;$(t).animate({opacity:i},600),e?$(t).css("z-index",n):setTimeout(function(){$(t).css("z-index",n)},600)}function n(){var e=$(".module-window form");d=!1,t(0,".overlay.darken"),t(0,".overlay.module"),e.animate({opacity:0},700),setTimeout(function(){e.html("closed")},700)}function i(e){var n=$(".module-window form");d=!0,t(1,".overlay.darken"),t(1,".overlay.module"),n.html(e),n.animate({opacity:1},700)}var o=!1,a=0,d=!1,u=5;e(),$(window).bind("resize",function(){o||setTimeout(function(){e()},200)}),$(document).on("click","body",function(e){setTimeout(function(){o&&!$(e.target).is("#settings, #settings *")?(o=!1,$("#settings").animate({left:a},700),t(0,".overlay.darken")):!o&&$(e.target).is("#settings-btn, #settings-btn *")&&(o=!0,$("#settings").animate({left:0},700),t(1,".overlay.darken"))},10)}),$(document).on("click","body",function(e){setTimeout(function(){d&&!$(e.target).is(".module-window, .module-window *")?n():!d&&$(e.target).is("#quick-add-btn, #quick-add-btn *")&&i("test")},10)}),$("#btnHideDisplay")&&$(document).on("click","#btnHideDisplay",function(){$(".responseContainer").html("")})});